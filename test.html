<script src="sandbox.bundle.js"></script>
<script>
    function toNCMBuffer(audiodata, from, len) {
        let now = 0;
        let json = {}
        let buf = audiodata.getChannelData(1)

        while (now < len * 8e3) {
            json[now] = buf[now * audiodata.sampleRate / 8e3 + from * audiodata.sampleRate];
            now += 1;
        }
        return json;
    }

    (async () => {
        let songdata = await fetch('Komplexe.mp3').then(res => res.arrayBuffer())
        const audioCtx = new AudioContext();
        let data = await audioCtx.decodeAudioData(songdata)
        console.log(JSON.stringify(NeteaseRecordArrayToBase64(toNCMBuffer(data, 4,6))))
    })()
</script>